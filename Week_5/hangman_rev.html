<!DOCTYPE html>
<html>

<head>
    <title>Hangman!</title>
</head>

<body>
    <h1>Fruit Name Hangman</h1>
    <script type="text/javascript">
    //An array of words
    var pickWord = function() {
        var words = [
            "apple",
            "apricot",
            "banana",
            "blackberry",
            "blueberry",
            "cherry",
            "coconut",
            "cranberry",
            "grape",
            "grapefruit",
            "kiwi",
            "lemon",
            "lime",
            "mango",
            "cantaloupe",
            "honeydew",
            "watermelon",
            "nectarine",
            "orange",
            "clementine",
            "tangerine",
            "papaya",
            "peach",
            "pear",
            "plum",
            "pineapple",
            "pomegranate",
            "raspberry",
            "strawberry"
        ]

        //Pick a random word from the words array
        return words[Math.floor(Math.random() * words.length)]
        console.log("Random word is: " + word)
    }

    //Answer array 
    var setUpAnswerArray = function(word) {
        var answerArray = []
        for (var i = 0; i < word.length; i++) {
            answerArray[i] = "_"
        }
        return answerArray
    }

    var showPlayerProgress = function(answerArray) {
        var remainingLetters = words.length
        var guesses = 10;
        while (remainingLetters > 0 && guesses > 0) {
            //Show the player their progress
            alert(answerArray.join(" "))
        }

        //Get a guess from the player
        var getGuess = function() {
            return prompt("Guess a letter, or click cancel to stop playing.")
            if (guess === null) {
                //Exit the game
                break
                // } else if (guess.length !== 1) {
                //     // console.log("answerArray2 = " + answerArray)
                //     alert("Please enter a single letter.")
                // } else {
                //     guesses--
                //     guess = guess.toLowerCase()
            }
        }

        var updateGameState = function(guess, word, answerArray) {
            var appearances = 0
            for (var j = 0; j < word.length; j++) {
                //Update the game state with the guess
                if (word[j] === guess && answerArray[j] === "_") {
                    answerArray[j] = guess
                    remainingLetters--
                }
            }
            return appearances
        }

        //Show answer and congratulate the player
        var showAnswerAndCongratulatePlayer = function(answerArray) {
            showPlayerProgress(answerArray);
            alert("Good job! The answer was " + answerArray.join(""))
        }

        var word = pickWord();
        var answerArray = setupAnswerArray(word);
        var remainingLetters = word.length;

        while (remainingLetters > 0) {
            showPlayerProgress(answerArray)
            var guess = getGuess()
            if (guess === null) {
                break;
            } else if (guess.length !== 1) {
                alert("Please enter a single letter.");
            } else {
                var correctGuesses = updateGameState(guess, word, answerArray);
                remainingLetters -= correctGuesses;
            }
        }

        return showAnswerAndCongratulatePlayer(answerArray)
    }
    </script>
</body>

</html>